#include <behaviors.dtsi>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/mouse.h>


&lt {
    tapping-term-ms = <200>;
    flavor = "balanced";
    quick-tap-ms = <150>;
};

/ {
    combos {
        compatible = "zmk,combos";

        escc {
            bindings = <&kp ESC>;
            key-positions = <17 18>;
            layers = <0>;
        };
    };

    keymap {
        compatible = "zmk,keymap";

        Base {
            bindings = <
&none           &none               &none               &none               &none               &none               &none           &none               &none                   &none               &none                        &none
// ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
&none           &kp Q               &kp W               &kp F               &kp P               &kp B               &kp J           &kp L               &kp U                   &kp Y               &kp SEMI                     &none
//                                                                                                           ||
&none           &mt LEFT_CONTROL A  &mt LEFT_ALT R      &mt LEFT_COMMAND S  &mt LEFT_SHIFT T    &kp G               &kp M           &mt RIGHT_SHIFT N   &mt RIGHT_COMMAND E     &mt RIGHT_ALT I     &mt RIGHT_CONTROL O          &none
//                                                                                                           ||
&none           &kp Z               &kp X               &kp C               &kp D               &kp V               &kp K           &kp H               &kp COMMA               &kp DOT             &kp SLASH                    &none
//                                                                                                           ||
                                                        &lt 5 ESC           &lt 1 SPACE         &lt 2 TAB           &lt 4 ENTER     &lt 3 BACKSPACE
                                                        // --------------------------------------------------||---------------------------------------------
                                                                            &none               &none               &none
            >;

            trackball-bindings = <&tmv_coarse>;
        };

        Navigation {
            bindings = <
&none           &none               &none               &none               &none               &none               &none           &none               &none                   &none                 &none                     &none
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
&none           &kp GRAVE           &kp LBKT            &kp RBKT            &trans              &trans              &trans          &trans               &trans                 &trans                &trans                    &none
//                                                                                                           ||
&none           &kp SQT             &kp LPAR            &kp RPAR            &trans              &trans              &kp CAPS        &kp LEFT             &kp DOWN               &kp UP                &kp RIGHT                 &none
//                                                                                                           ||
&none           &kp BSLH            &kp LBRC            &kp RBRC            &trans              &trans              &kp INS         &kp HOME             &kp PAGE_DOWN          &kp PAGE_UP           &kp END                   &none
//                                                                                                           ||
                                                        &trans              &trans              &trans              &kp ENTER       &kp BACKSPACE
                                                        // --------------------------------------------------||-----------------------------------------------
                                                                            &none               &none               &none
            >;
        };

        Function {
            bindings = <
&none           &none               &none               &none               &none               &none               &none           &none               &none                   &none                 &none                     &none
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
&none           &kp GRAVE           &kp LBKT            &kp RBKT            &trans              &trans              &trans          &trans               &trans                 &trans                &trans                    &none
//                                                                                                           ||
&none           &kp SQT             &kp LPAR            &kp RPAR            &trans              &trans              &kp CAPS        &kp LEFT             &kp DOWN               &kp UP                &kp RIGHT                 &none
//                                                                                                           ||
&none           &kp BSLH            &kp LBRC            &kp RBRC            &trans              &trans              &kp INS         &kp HOME             &kp PAGE_DOWN          &kp PAGE_UP           &kp END                   &none
//                                                                                                           ||
                                                        &trans              &trans              &trans              &kp ENTER       &kp BACKSPACE
                                                        // --------------------------------------------------||-----------------------------------------------
                                                                            &none               &none               &none
            >;
        };

        Numbers {
            bindings = <
&none           &none               &none               &none               &none               &none               &none           &none               &none                   &none                 &none                     &none
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
&none           &kp GRAVE           &kp LBKT            &kp RBKT            &trans              &trans              &trans          &trans               &trans                 &trans                &trans                    &none
//                                                                                                           ||
&none           &kp SQT             &kp LPAR            &kp RPAR            &trans              &trans              &kp CAPS        &kp LEFT             &kp DOWN               &kp UP                &kp RIGHT                 &none
//                                                                                                           ||
&none           &kp BSLH            &kp LBRC            &kp RBRC            &trans              &trans              &kp INS         &kp HOME             &kp PAGE_DOWN          &kp PAGE_UP           &kp END                   &none
//                                                                                                           ||
                                                        &trans              &trans              &trans              &kp ENTER       &kp BACKSPACE
                                                        // --------------------------------------------------||-----------------------------------------------
                                                                            &none               &none               &none
            >;
        };

        Symbols {
            bindings = <
&none           &none               &none               &none               &none               &none               &none           &none               &none                   &none                 &none                     &none
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
&none           &kp GRAVE           &kp LBKT            &kp RBKT            &trans              &trans              &trans          &trans               &trans                 &trans                &trans                    &none
//                                                                                                           ||
&none           &kp SQT             &kp LPAR            &kp RPAR            &trans              &trans              &kp CAPS        &kp LEFT             &kp DOWN               &kp UP                &kp RIGHT                 &none
//                                                                                                           ||
&none           &kp BSLH            &kp LBRC            &kp RBRC            &trans              &trans              &kp INS         &kp HOME             &kp PAGE_DOWN          &kp PAGE_UP           &kp END                   &none
//                                                                                                           ||
                                                        &trans              &trans              &trans              &kp ENTER       &kp BACKSPACE
                                                        // --------------------------------------------------||-----------------------------------------------
                                                                            &none               &none               &none
            >;

            trackball-bindings = <&tsl>;//滚轮层
        };

        Systems {
            bindings = <
&none           &none               &none               &none               &none               &none               &none           &none               &none                   &none                 &none                     &none
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
&none           &kp GRAVE           &kp LBKT            &kp RBKT            &trans              &trans              &trans          &trans               &trans                 &trans                &trans                    &none
//                                                                                                           ||
&none           &kp SQT             &kp LPAR            &kp RPAR            &trans              &trans              &kp CAPS        &kp LEFT             &kp DOWN               &kp UP                &kp RIGHT                 &none
//                                                                                                           ||
&none           &kp BSLH            &kp LBRC            &kp RBRC            &trans              &trans              &kp INS         &kp HOME             &kp PAGE_DOWN          &kp PAGE_UP           &kp END                   &none
//                                                                                                           ||
                                                        &trans              &trans              &trans              &kp ENTER       &kp BACKSPACE
                                                        // --------------------------------------------------||-----------------------------------------------
                                                                            &none               &none               &none
            >;

            trackball-bindings = <&tmv_fine>;//精准指针层
        };
    };
};
